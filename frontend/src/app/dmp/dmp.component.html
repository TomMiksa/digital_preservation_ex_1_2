<div>
  <mat-toolbar color="primary">
    <mat-toolbar-row>
      <span>Digital Preservation Exercise 1.2</span>

      <span class="toolbar-spacer"></span>

      <button mat-button (click)="logout()">
        <mat-icon class="iD-icon" svgIcon="iD"></mat-icon>
        {{name}}
      </button>
    </mat-toolbar-row>
  </mat-toolbar>


  <div class="container">
    <div class="left">
      <mat-card>
        <mat-card-header>
          <mat-card-title><h2>Administrative data</h2></mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p><b>Orcid-Identifier: </b>{{administrativeData?.orcid}}</p>
          <p><b>Family name: </b>{{administrativeData?.family_name}}</p>
          <p><b>Given name: </b>{{administrativeData?.given_name}}</p>
          <p><b>E-Mail: </b>{{administrativeData?.email}}</p>
          <p><b>Country: </b>{{administrativeData?.country}}</p>
        </mat-card-content>
      </mat-card>
    </div>


    <div class="right">
      <div *ngFor="let resource of resources" class="right">
        <div>
          <mat-card>
            <mat-card-header>
              <mat-card-title><h2>Resource</h2></mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <mat-radio-group [(ngModel)]="resource.resourceType">
                <mat-radio-button *ngFor="let type of resourceTypes" [value]="type" style="margin-right: .5em">
                  {{type}}
                </mat-radio-button>
              </mat-radio-group>


              <mat-form-field>
                <mat-select placeholder="tag" (selectionChange)="changeTag(resource, $event)">
                  <mat-option *ngFor="let tag of tags" [value]="tag">
                    {{ tag }}
                  </mat-option>
                </mat-select>
              </mat-form-field>


              <div style="margin-top: 2em">
                <div *ngIf="resource.resourceType == 'GitHub'">
                  <mat-form-field>
                    <input matInput placeholder="GitHub repository" [(ngModel)]="resource.repoName"
                           (keyup)="fetchGitHub(resource)" (click)="fetchGitHub(resource)">
                  </mat-form-field>

                  <div *ngIf="resource.errorMsg === ''">
                    <div>
                      <p>GitHub: </p>

                      <p *ngIf="resource.licence_url !== ''">
                        <a [href]="resource.licence_url" target="_blank">{{resource.license}}</a>
                      </p>
                      <p *ngIf="resource.licence_url === ''">
                        no licence information is provided
                      </p>
                      Repo Owner:
                      <p *ngIf="resource.owner !== undefined ">
                        <a [href]="resource.owner.html_url" target="_blank"> {{resource.owner.login}} </a>
                      </p>

                      <p>
                        <!--<img [src]="resource.owner.avatar_url">-->
                      </p>

                      <br/>
                      Server side size: {{resource.size}} KB<br/>
                      Contributors:
                      <p *ngFor="let contributor of resource.contributors">
                        <a [href]="contributor.html_url" target="_blank"> {{contributor.login}}</a>
                        <br/>
                        <!--<img [src]="contributor.avatar_url">-->
                      </p>
                      Languages:

                      <p *ngFor="let language of resource.languages">
                        {{language.name}} - {{language.loc}}
                      </p>

                      <!--<ngx-charts-pie-chart-->
                      <!--[view]="view"-->
                      <!--[results]="resource.language_chart"-->
                      <!--[legend]="showLegend"-->
                      <!--&gt;</ngx-charts-pie-chart>-->


                    </div>
                  </div>

                </div>

                <div *ngIf="resource.resourceType == 'DOI'">
                  <mat-form-field>
                    <input matInput placeholder="doi link" (keyup)="fetchDOIMetadata(resource)"
                           (click)="fetchDOIMetadata(resource)" [(ngModel)]="resource.doiLink">
                  </mat-form-field>

                  creators:
                  <p *ngFor="let creator of resource.creators">
                    {{creator}}
                  </p>

                  <p>
                    date:
                    {{resource.date}}
                  </p>

                  <p>
                    title:
                    <a [href]="resource.zenodo_identifier" target="_blank">{{resource.title}}</a>
                  </p>
                  <p>
                    description:
                    {{resource.description}}
                  </p>
                  <p>
                    licence:
                    <a [href]="resource.license" target="_blank"> {{resource.license}}</a>
                  </p>
                </div>
              </div>


              <div *ngIf="resource.errorMsg !== ''">
                <div>
                  {{resource.errorMsg}}
                </div>
              </div>

            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>

    <div class="left">
      another lefty <br/>
      <div style="margin-top: 2em">
        <button mat-button (click)="addResource()">ADD Resource</button>
      </div>

    </div>

  </div>


</div>
